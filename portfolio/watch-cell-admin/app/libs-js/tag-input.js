!function(e,t){function h(e){return"undefined"!=typeof e}function m(e){return Object.keys(e).length}var n="__instance__",a=setTimeout,r="parentNode",i="previousSibling",s="setAttribute",u="getAttribute",l="appendChild",c="removeChild",f="innerHTML",p="textContent",d="className",g="nodeName",v="toLowerCase";!function(e){e.version="2.0.4",e[n]={},e.each=function(t,r){return a(function(){var r,a=e[n];for(r in a)t(a[r],r,a)},0===r?0:r||1),e}}(e.TIB=function(e,a){function T(){var t=b("span"),n=a.classes;x=b("span"),x[s]("contenteditable","true"),x[s]("spellcheck","false"),x[s]("placeholder",e.placeholder),e.type="hidden",e[d]+=" "+n[1],t[d]=n[0],t[f]='<span class="'+n[2]+'"></span>',t.onclick=function(){x.focus()},e[r].insertBefore(t,e),t[l](e),t[l](x),a.values===!0&&(a.values=e.value.split(a.join));for(j in a.values){var i=o.filter(a.values[j]);i&&o.set(i)}}function w(e){var t=o.filter(e);return o.clear(),t&&m(o.tags)!==a.max?t in o.tags?(a.alert&&alert(a.text[1].replace(/%s/g,t)),o.clear(),!1):(o.set(t).update(),!1):!1}a=a||{};var j,y,x,o=this,b=function(e){return t.createElement(e)},k={join:", ",max:9999,values:!0,classes:["tags","tags-input","tags-output"],text:["Remove “%s” Tag","Duplicate “%s” Tag"],alert:!0,update:function(){}};TIB[n][e.id||e.name||m(TIB[n])]=o,o.tags={},"string"==typeof a&&(a={join:a});for(j in k)h(a[j])||(a[j]=k[j]);return o.input=e,o.config=a,o.filter=function(e){return e.replace(new RegExp("["+a.join.replace(/\s/g,"")+"]|^\\s+|\\s+$|\\s{2,}","g"),"")[v]()},o.clear=function(){return x[p]="",o},o.reset=function(t){if(e[i][f]="",t){delete o.tags[t],y=o.tags,o.tags={};for(j in y)o.set(j)}else o.tags={};return o.clear().update()},o.set=function(t){var n=e[i],p=b("span"),d=b("a");return p[f]=t,d.title=a.text[0].replace(/%s/g,t),d[s]("data-tag",t),d.href="javascript:;",d.onclick=function(){return delete o.tags[this[u]("data-tag")],this[r][r][c](this[r]),o.update(),x.focus(),!1},p[l](d),n[l](p),o.tags[t]=1,o},o.update=function(){var t=Object.keys(o.tags).join(a.join);return e.value=t,a.update(o.tags),o},o.create=function(){return T(),o.clear(),x.onkeydown=function(t){var a,n=e[i],a=n.lastChild,s=t.keyCode,l=(t.key||"")[v](),f=this[p],d=t.shiftKey;if(!(f||"backspace"!==l&&8!==s)){if(a){var h=a.children[0][u]("data-tag");n[c](a),delete o.tags[h]}return o.update(),!1}if(","===l||!d&&188===s)return w(f);if("enter"===l||13===s){for(var m,b=e;b=b[r];)if("form"===b[g][v]()){m=b;break}return w(f),m&&m.submit(),!1}return o},x.onblur=function(){return w(this[p])},o.update()},o.output=e[i],o})}(window,document);